<html>
<head>
    <meta charset="utf-8">
    <title>Mocha Tests</title>
    <link href="https://unpkg.com/mocha@4.0.1/mocha.css" rel="stylesheet" />
</head>
<body>
<div id="mocha"></div>
<script src="../dist/blockv-sdk.min.js"></script>
<script src="https://unpkg.com/chai@4.1.2/chai.js"></script>
<script src="https://unpkg.com/mocha@4.0.1/mocha.js"></script>


<script>mocha.setup('bdd')</script>
<script type="module">

const login = async () => {
  return await Blockv.UserManager.login("kylmci+unittest@gmail.com", "email", "test");
}




describe ('#login()', function() {
  this.timeout(5000);
  it('Logging in the current User', async () => {

      let user = await login();
      if(typeof user !== 'object'){
        throw new Error("wrong type ret");
      }
  });
});

describe ('#getCurrentUser()', function(){
  it("Get the current user object", async () => {
    await login();
    await Blockv.UserManager.getCurrentUser();

  });

});

describe ('#getAccessToken', function(){

  it("Access Token is not NULL", async()=>{
    await login();
    await Blockv.UserManager.getAccessToken();
})


});

describe ('#logout', function(){
  it("Logout of the account?", async () => {
      await login();
      await Blockv.UserManager.logout();

  });
});

describe ('#get Current User Tokens', function(){
  it("Refresh Token is set in local?", async () => {
      await login();
      await Blockv.UserManager.getCurrentUserTokens();

  });
});


</script>

<script type="module">
    mocha.checkLeaks();
    mocha.run();
</script>
</body>
</html>
